---
title: Visualization Basics
subtitle: Lecture 2
title-slide-attributes:
  data-background-image: ../title-bg.png
  data-background-size: stretch
  data-slide-number: none
format: revealjs
auto-stretch: false
---

```{r}
library(tidyverse)
```

# Grammar of graphics

## Data visualization

> *"The simple graph has brought more information to the data analyst's mind than any other device." --- John Tukey*

-   Data visualization is the creation and study of the visual representation of data

-   Many tools for visualizing data -- R is one of them

-   Many approaches/systems within R for making data visualizations -- **ggplot2** is one of them, and that's what we're going to use

## ggplot2 âˆˆ tidyverse

::: columns
::: {.column width="50%"}
![](images/ggplot2-part-of-tidyverse.png){fig-align="left"}
:::

::: {.column width="50%"}
-   **ggplot2** is tidyverse's data visualization package

-   `gg` in "ggplot2" stands for Grammar of Graphics

-   Inspired by the book **Grammar of Graphics** by Leland Wilkinson
:::
:::

## Grammar of Graphics

::: columns
::: {.column width="30%"}
A grammar of graphics is a tool that enables us to concisely describe the components of a graphic
:::

::: {.column width="70%"}
![](images/grammar-of-graphics.png){fig-align="right"}
:::
:::

::: aside
Source: [BloggoType](http://bloggotype.blogspot.com/2016/08/holiday-notes2-grammar-of-graphics.html)
:::

## Hello ggplot2!

-   `ggplot()` is the main function in ggplot2
-   Plots are constructed in layers
-   Structure of the code for plots can be summarized as

```{r}
#| eval: false

ggplot(data = [dataset], 
       mapping = aes(x = [x-variable], y = [y-variable])) +
   geom_xxx() +
   other options
```

-   The ggplot2 package comes with the tidyverse

```{r}
#| message: false

library(tidyverse)
```

-   For help with ggplot2, see [ggplot2.tidyverse.org](http://ggplot2.tidyverse.org/)

## Data: Palmer Penguins {.smaller}

::: columns
::: {.column width="80%"}
Measurements for penguin species, island in Palmer Archipelago, size (flipper length, body mass, bill dimensions), and sex.

```{r}
library(palmerpenguins)
glimpse(penguins)
```
:::

::: {.column width="20%"}
![](images/penguins.png){fig-align="left"}
:::
:::

# Types of variables {.smaller}

-  **Categorical** variables: can take only a small number of values
    +  Typically doesn't make sense to do arithmetic on categorical variables
    +  Types:
      -  **Nominal** variables: categories with no inherent order (e.g., species, island)
       -  **Ordinal** variables: categories with a natural order (e.g., size: small, medium, large)
-  **Numerical** variables: makes sense to "do math" with numerical variables
    +  Types:
       -  **Discrete** variables: can take only certain values (e.g., number of penguins)
       -  **Continuous** variables: can take any value in a range (e.g., bill length, body mass)

## Categorical vs. Numerical: A fuzzy line {.smaller}

-  Many times: categorical vs. numerical is NOT clear-cut 
    -  Number $\neq$ Numerical:
       +  e.g., ZIP codes, phone numbers, student ID numbers
    -  Ordinal variables are commonly treated as numerical when they aren't
       +  e.g., Likert scale responses (Strongly Disagree to Strongly Agree)    
-  Type of variable will depend on type of analysis and visualization
-  Sometimes: better to treat numerical as categorical (e.g. if you have a very small number of distinct values)

## Visualizing Univariate Data

-  Different types of plots for different types of variables
    +  Categorical variables: bar charts, pie charts (ew!)
    +  Numerical variables: histograms, boxplots, density plots (many options)
-  Let's visualize univariate data from the `penguins` data frame
    + `species`
    + `bill_length_mm`
    + `year`

## Bivariate Plots: Visualizing Relationships

-  Visualizing relationships between two variables
    +  Categorical vs. Numerical: boxplots
    +  Numerical vs. Numerical: scatterplots
    +  Categorical vs. Categorical: bar charts

## More than two variables

-  Visualizing relationships among more than two variables
    +  Use aesthetics like color, shape, and size to represent additional variables
    +  Faceting to create multiple plots based on the values of one or more categorical variables

## Goal: Let's create this plot!


```{r}
#| label: goal-plot
#| echo: false

ggplot(
  penguins,
  aes(x = bill_depth_mm, y = bill_length_mm, color = species)
) +
  geom_point() +
  labs(
    title = "Bill depth and length",
    subtitle = "Dimensions for Adelie, Chinstrap, and Gentoo Penguins",
    x = "Bill depth (mm)", y = "Bill length (mm)",
    color = "Species"
  )
```

## An improved goal {.smaller}

```{r}
#| label: improved-goal-plot
#| echo: false

ggplot(
  penguins,
  aes(x = bill_depth_mm, y = bill_length_mm, color = species, shape = species)) +
  geom_point(size = 2) +
  labs(
    title = "Bill depth and length",
    subtitle = "Dimensions for Adelie, Chinstrap, and Gentoo Penguins",
    x = "Bill depth (mm)", y = "Bill length (mm)",
    color = "Species",
    shape = "Species",
    caption = "Source: Palmer Station LTER / palmerpenguins package"
  ) +
  theme_minimal() +
  ggthemes::scale_color_colorblind()
```

## Narrative {.smaller}

- Start with the `penguins` data frame, map bill depth to the x-axis and map bill length to the y-axis.

- Represent each observation with a point and map species to the color and shape of each point.

- Title the plot "Bill depth and length", add the subtitle "Dimensions for Adelie, Chinstrap, and Gentoo Penguins", label the x and y axes as "Bill depth (mm)" and "Bill length (mm)", respectively, label the legend "Species", and add a caption for the data source.

- Finally, use a discrete color scale that is designed to be perceived by viewers with common forms of color blindness.

# Wrap up

## This week's tasks

1.  Create a GitHub account if you don't have one

2.  Read the [syllabus](https://www.vizdata.org/syllabus.html)

3.  Make sure you can log in to RStudio and reserve a container for STA 313: [cmgr.oit.duke.edu/containers](https://cmgr.oit.duke.edu/containers)

4.  Complete the *Getting to know you* survey on Canvas -- to be posted

5.  Complete the readings
