{
  "hash": "1dbb944c3fbf69264f3c5ecd3f94d9d9",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Importing Data\nsubtitle: \"Lecture 5\"\ntitle-slide-attributes:\n  data-background-image: ../vizdata-bg.png\n  data-background-size: stretch\n  data-slide-number: none\nformat: revealjs\n---\n\n## This lesson\n\n-   Learn how to import data into R using the `readr` package.\n-   Understand how `readr` parses files and how to control it.\n-   Learn how to write data from R back to a file.\n-   Become aware of other packages for importing different file types.\n\n## The `readr` package\n\n-   Part of the `tidyverse`, `readr` provides functions for reading rectangular data from delimited files (like CSVs).\n-   It's fast, consistent, and produces `tibble`s.\n-   It provides detailed information about how files were parsed.\n\n## Setup\n\nWe'll use functions from `readr`, which is loaded with the `tidyverse`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n## Reading delimited data\n\nThe most common function is `read_csv()` for comma-separated values.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstudents <- read_csv(\"path-to-file.csv\")\nstudents\n```\n:::\n\n\n`read_csv()` prints the column specification, which is its guess for each column's type.\n\n## Paths and Organizing Your Computer\n\n-  Think of your computer like a file cabinet\n-  When working on a project in R, put it in a folder and make that folder a \"workspace\" or \"project\" in Positron, RStudio, or VSCode\n\n## Example\n\n```text\nproject-name/\n├── project-name.code-workspace\n├── README.md             <- Overview of the project and how to run it.\n├── data/\n│   ├── raw/              <- Original data (never edit these files).\n│   └── processed/        <- Cleaned data ready for analysis (RDS or CSV).\n├── R/                    <- Folder for reusable functions and source code.\n├── scripts/              <- Analysis scripts (e.g., 01_cleanup.R, 02_model.R).\n├── output/               <- Plots, tables, and exported results.\n└── docs/                 <- Quarto or RMarkdown reports.\n```\n\n## Where to put this\n\n-  Good practice: use Github\n-  DON'T PUT FOLDER IN DOWNLOADS!\n-  Organize your computer\n-  Let's look through Dr. F's organization\n-  Avoid putting in Dropbox, OneDrive, Google Drive, folders if using github and writing code\n\n## Practice {.smaller}\n\n-  Download Star Formation data from Canvas\n-  Create a new folder on your computer called StarFormation (don't put it in your Downloads folder)\n-  Create the following folder structure\n\n```text\nStarFormation/\n├── project-name.code-workspace \n├── README.md             \n├── data/\n│   ├── raw/              \n│   │   ├── MIRION_meta_all_1.csv\n│   │   ├── MIRION_meta_din_1.csv\n│   │   └── MIRION_spec_1.csv              \n│   └── processed/        \n├── scripts/              \n│   └── loading_the_data.R\n├── output/               \n└── docs/                 \n    └── Tables-for-CSCI2040.txt\n```\n\n## Paths\n\n- Root directory: Highest level folder of your project or computer (sometimes the same)\n- Working directory: The folder R is currently \"looking at\"\n- Making a project in RStudio/Positron automatically sets the working directory to the project folder\n- Two types of Paths:\n  - Absolute paths: Full path from the root of your computer\n  - Relative paths: Path from your working directory\n\n## Practice\n\n-  In our `loading_the_data.R` script, let's use `read_csv` to load the three data sets into R\n\n## Other delimiters\n\n- `readr` provides functions for other common delimiters:\n  - `read_csv2()`: For semicolon-separated files. Common in European countries.\n  - `read_tsv()`: For tab-separated files.\n  - `read_delim()`: For files with any delimiter.\n\n## Data Types in R\n\n-  There are a variety of data types in R. Some common ones include:\n  -   **Character**: Text data (e.g., names, categories).\n  -   **Numeric**: Decimal numbers (e.g., 3.14, -2.5).\n  -   **Integer**: Whole numbers (e.g., 1, 42).\n  -   **Logical**: Boolean values (`TRUE` or `FALSE`).\n  -   **Factor**: Categorical data with a fixed set of levels (e.g., \"low\", \"medium\", \"high\").\n-  More on this later in the course!\n-  For now: Understanding data types is crucial for data analysis and manipulation in R.\n\n## Parsing & Column Specification\n\n-  `readr` tries to be clever and guess column types by looking at the first 1000 rows. Sometimes, it guesses wrong.\n-  Common issues:\n  -   Leading zeros in numeric columns (R reads them as characters).\n  -   Mixed types in a column (e.g., numbers and text).\n  -   Units included in numeric columns (e.g., \"10 kg\").\n  \n\n## Manually specifying column types\n\nYou can override `readr`'s guesses using the `col_types` argument. More on this later in the course.\n\n## Other common import options\n\n- `skip = n`: Skip the first `n` lines (useful for files with metadata at the top).\n- `comment = \"#\"`: Drop all lines that start with `#`.\n- `col_names = FALSE`: If your file has no column headers. `readr` will label them `X1`, `X2`, etc.\n- `na = \"...\"`: Specify which strings should be treated as missing values (e.g., `na = \"N/A\"`).\n\nExample with `skip`:\n\n::: {.cell}\n\n```{.r .cell-code}\nread_csv(\"\n  This is metadata\n  That we want to skip\n  x,y\n  1,2\n\", skip = 2)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: One or more parsing issues, call `problems()` on your data frame for details,\ne.g.:\n  dat <- vroom(...)\n  problems(dat)\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 2 Columns: 1\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (1): That we want to skip\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 1\n  `That we want to skip`\n  <chr>                 \n1 x,y                   \n2 1,2                   \n```\n\n\n:::\n:::\n\n\n## Writing to a file\n\nTo save a data frame back to a file, use `write_csv()`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_csv(file-name, \"path-to-file.csv\")\n```\n:::\n\n\n## Practice with reading and writing\n\n-  Read `MIRION_spec_1.csv` into R\n-  Put data in tidy format\n-  Save the tidy data to `data/processed/MIRION_spec_tidy.csv`\n\n## Saving and loading R objects\n\nFor saving intermediate R objects, `write_csv()` is not ideal because it loses type information (e.g., factors become characters).\n\nIt's better to use `write_rds()` and `read_rds()` to save and load a single R object in R's native RDS format.\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_rds(file, \"path-to-file.rds\")\nrestored_file <- read_rds(\"path-to-file.rds\")\n```\n:::\n\n\n## Other data sources\n\nThe `tidyverse` ecosystem has packages for many other data types:\n- **`readxl`**: For Excel files (`.xls`, `.xlsx`).\n- **`haven`**: For other statistical formats (SPSS, Stata, SAS).\n- **`DBI`**: To interface with relational databases.\n- **`arrow`**: For high-performance binary formats like Parquet and Feather.\n\n## Summary\n\n-   `read_csv()` is your go-to for reading delimited text files.\n-   **Always** check the column specifications that `readr` prints. If they're wrong, fix them with `col_types`.\n-   Use `write_csv()` to save your data frames to CSV files for sharing.\n-   Use `write_rds()` to save R objects for later use in R.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}